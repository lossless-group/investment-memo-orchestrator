# ğŸš€ Release v0.2.2

**Investment Memo Orchestrator** - Multi-agent system for generating professional investment memos using LangGraph and Claude.

This is the first published release with full documentation. Version v0.2.2 includes critical anti-hallucination features, entity disambiguation, and PDF export improvements.

---

## âœ¨ What's New in v0.2.2

### ğŸ›¡ï¸ Tier 2 Anti-Hallucination System: Fact Checker Agent
A new validation layer that verifies all factual claims against research sources before finalization.

**Features:**
- Extracts factual claims (metrics, financials, dates, names, pricing)
- Verifies each claim has proper inline citations
- Flags unsourced or suspicious claims by severity (critical/high/medium/low)
- Recommends actions: `remove`, `flag_for_review`, `request_source`, `accept`
- Scores sections on citation coverage (0-100%)
- Marks sections for rewrite if critical issues found

**Strictness levels:**
- `high` (default): 80% of claims must be cited
- `medium`: 60% of claims must be cited
- `low`: 40% of claims must be cited

**Usage:**
```bash
export FACT_CHECK_STRICTNESS=high  # or medium, low
python -m src.main "CompanyName"
```

**Output:**
- `output/Company-v0.0.1/fact-check.json` - Detailed fact-check report
- `output/Company-v0.0.1/fact-check.md` - Human-readable summary

---

### ğŸ” Entity Disambiguation System
Prevents research confusion when multiple companies share the same name.

**Problem:** Searching for "Sava" could return results for a biotech company OR SavaHQ fintech platform, leading to incorrect team/metrics in memos.

**Solution:**
- **Domain filtering**: Injects `site:{domain}` into all Tavily/Perplexity queries
- **URL verification**: Research synthesis validates sources match target company URL
- **Mismatch detection**: Fact checker compares expected vs. actual company URLs
- **Auto-flagging**: All sections marked for rewrite if entity mismatch found

**Example:**
```json
// data/Sava.json
{
  "url": "https://www.savahq.com",
  "notes": "Ensure research is about SavaHQ, NOT biotech company named Sava"
}
```

Search queries now include: `Sava site:savahq.com founders team`

---

### ğŸ“„ PDF Citation Rendering Fix
Fixes question marks appearing in footnote back-references in PDF exports.

**Technical:**
- Unicode `â†©ï¸` (hooked arrow) wasn't rendering in WeasyPrint PDFs
- Solution: CSS replaces with ASCII `^` using `::after` pseudo-element
- Works across all fonts and PDF viewers

**Before:** `[1] Source Title ?`
**After:** `[1] Source Title ^`

---

### ğŸ¨ New Brand: Meilin Capital
Luxury black & gold brand configuration for premium client presentations.

**Color palette:**
- Primary: `#1a1a1a` (rich black)
- Secondary: `#D4AF37` (classic gold)
- Background: `#fffef8` (warm white)
- Alt background: `#fff9e6` (pale gold)

**Typography:**
- Body: Newsreader (elegant serif)
- Headers: Inter (modern sans-serif)

**Export:**
```bash
python export-branded.py memo.md --brand meilin
python export-branded.py memo.md --brand meilin --mode dark
```

---

### ğŸ“Š New Company Templates
Pre-configured company data files:

**Higgsfield** - AI video generation platform (Series B)
```bash
python -m src.main "Higgsfield"
```

**Sava** - Entity disambiguation example
```bash
python -m src.main "Sava"
```

---

### ğŸ–¼ï¸ Avalanche Brand Assets
- Added light mode trademark: `trademark__Avalanche--Brand.png`
- Added dark mode trademark: `trademark__Avalanche--Dark-Mode.webp`
- Updated brand configuration

---

## ğŸ“¦ Installation

```bash
git clone https://github.com/lossless-group/investment-memo-orchestrator.git
cd investment-memo-orchestrator
git checkout v0.2.2

# Setup
uv venv --python python3.11
source .venv/bin/activate
uv pip install -e .

# Configure API keys
cp .env.example .env
# Edit .env with your ANTHROPIC_API_KEY, TAVILY_API_KEY, PERPLEXITY_API_KEY
```

---

## ğŸš€ Quick Start

```bash
# Generate investment memo
python -m src.main "CompanyName"

# Export with branding
python export-branded.py output/Company-v0.0.1/4-final-draft.md --brand meilin

# Convert to PDF
./html-to-pdf.sh exports/branded/Company-v0.0.1.html
```

---

## ğŸ”§ What's Included

### Core Features
- âœ… Multi-agent orchestration (LangGraph)
- âœ… 10-section investment memo generation
- âœ… Web research integration (Tavily/Perplexity)
- âœ… Perplexity premium sources (@syntax)
- âœ… Section-by-section processing (no API timeouts)
- âœ… Automatic citation enrichment (Obsidian-style)
- âœ… Link enrichment (investors, competitors, partners)
- âœ… **NEW**: Fact-checking agent (Tier 2 anti-hallucination)
- âœ… **NEW**: Entity disambiguation
- âœ… Citation validation
- âœ… Quality scoring (0-10 scale)
- âœ… Git-based versioning
- âœ… Multi-brand export system
- âœ… **NEW**: PDF citation rendering fix

### Investment Types
- Direct investments (startups)
- Fund commitments (LP investments)

### Memo Modes
- **Consider**: Prospective analysis (PASS/CONSIDER/COMMIT)
- **Justify**: Retrospective justification (always COMMIT with rationale)

---

## ğŸ“Š Files Changed

**Added:**
- `data/Higgsfield.json`
- `data/Sava.json`
- `templates/brand-configs/brand-meilin-config.yaml`
- `templates/trademarks/trademark__Avalanche--Brand.png`
- `templates/trademarks/trademark__Avalanche--Dark-Mode.webp`

**Modified:**
- `src/agents/fact_checker.py` - Fixed VersionManager error, added entity mismatch detection
- `src/agents/research_enhanced.py` - Added domain-based search filtering
- `templates/base-style.css` - PDF citation rendering fix
- `templates/brand-configs/brand-avalanche-config.yaml` - Minor updates

**Stats:** 9 files changed, 164 insertions(+), 32 deletions(-)

---

## ğŸ› Bug Fixes

| Issue | Fix |
|-------|-----|
| `AttributeError: 'VersionManager' object has no attribute 'list_versions'` | Replaced with `get_latest_output_dir()` helper |
| PDF footnotes show `?` instead of arrows | CSS replacement with ASCII characters |
| Wrong company data in memos (name collisions) | Domain filtering + URL verification |
| Entity mismatches go undetected | Fact checker validates company URLs |

---

## ğŸ“š Documentation

- **Setup**: See `README.md`
- **Architecture**: See `CLAUDE.md`
- **Brand configs**: See `templates/brand-configs/README.md`
- **Outlines**: See `templates/outlines/README.md`
- **Changelogs**: See `changelog/` directory

---

## ğŸ”’ Requirements

- Python 3.11+
- `uv` package manager (NOT pip)
- API keys: Anthropic (required), Tavily (recommended), Perplexity (optional)
- WeasyPrint dependencies (for PDF export)

---

## ğŸ™ Acknowledgments

Built with:
- **Claude Sonnet 4.5** (LLM)
- **LangGraph** (orchestration)
- **Tavily** (web search)
- **Perplexity Sonar Pro** (citation enrichment)
- **WeasyPrint** (PDF export)

---

## ğŸ“ Notes

This is the first official GitHub Release with full documentation. Previous tags (v0.1.0-v0.2.1) exist but lack published release notes.

---

**Need help?** Open an issue or see [CLAUDE.md](./CLAUDE.md) for detailed usage instructions.
